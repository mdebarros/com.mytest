language: java
jdk:
  - oraclejdk7
install: mvn install -DskipTests=true -Dmaven.javadoc.skip=true -B -V --settings ./settings.xml
script: mvn clean package --settings ./settings.xml
#after_success: mvn clean deploy --settings ./settings.xml
#before_deploy:
#	-
after_success: mvn -X --settings ./settings.xml -DskipTests=true -Dmaven.javadoc.skip=true -B -V -Dcloudhub.username=$cloudhub_username -Dcloudhub.password=$cloudhub_password -Dcloudhub.domain=dev-$cloudhub_domain -Dcloudhub.muleVersion=$cloudhub_muleVersion -Dcloudhub.maxWaitTime=$cloudhub_maxWaitTime -Dcloudhub.workers=$cloudhub_workers package mule-appkit:cloudhub-deploy
	#- if [ "$TRAVIS_BRANCH" == "*develop*" ]; then mvn -X --settings ./settings.xml -DskipTests=true -Dmaven.javadoc.skip=true -B -V -Dcloudhub.username=$cloudhub_username -Dcloudhub.password=$cloudhub_password -Dcloudhub.domain=dev-$cloudhub_domain -Dcloudhub.muleVersion=$cloudhub_muleVersion -Dcloudhub.maxWaitTime=$cloudhub_maxWaitTime -Dcloudhub.workers=$cloudhub_workers package mule-appkit:cloudhub-deploy; fi
	#- if [ "$TRAVIS_BRANCH" == "*master*" ]; then mvn -X --settings ./settings.xml -DskipTests=true -Dmaven.javadoc.skip=true -B -V -Dcloudhub.username=SIT_$cloudhub_username -Dcloudhub.password=$cloudhub_password -Dcloudhub.domain=sit-$cloudhub_domain -Dcloudhub.muleVersion=$cloudhub_muleVersion -Dcloudhub.maxWaitTime=$cloudhub_maxWaitTime -Dcloudhub.workers=$cloudhub_workers package mule-appkit:cloudhub-deploy; fi
